package projektparagon;
import java.math.BigDecimal;
import models.ItemCity

dialect "java"
rule "Nalicz podatek na podstawie typu produktu"
when
  $basket: Basket($products: productList)
  $product: Product() from $products
  $productType: String() from $product.getType()
  $taxRate: BigDecimal() from calculateTaxRate($productType)
then
  $product.setTaxRate($taxRate);
  updateReceipt($basket);
end

function BigDecimal calculateTaxRate(String productType) {
  if (productType.equals("EGGS")) {
    return new BigDecimal("0.23");
  } else if (productType.equals("MILK")) {
    return new BigDecimal("0.05");
  } else if (productType.equals("SUGAR")) {
    return new BigDecimal("0.08");
  }
}